<h1>Organization Invitation</h1>

<p>
  You were invited to join <strong><%= @invitation.organization.name %></strong>
  as <strong><%= @invitation.role.humanize %></strong>.
</p>

<p class="org-muted">
  Invited by:
  <%= @invitation.invited_by&.respond_to?(:email) ? @invitation.invited_by.email : "A team member" %>
</p>

<% if @invitation.expired? %>
  <div class="org-flash alert">This invitation has expired.</div>
<% elsif @invitation.accepted? %>
  <div class="org-flash notice">This invitation has already been accepted.</div>
<% else %>
  <% if @user_is_logged_in && @user_email_matches %>
    <%= button_to "Accept invitation", accept_invitation_path(@invitation.token), method: :post, class: "org-button primary" %>
  <% elsif @user_is_logged_in %>
    <div class="org-flash alert">
      You are signed in with a different email address than the invitation target.
    </div>
  <% else %>
    <p class="org-muted">
      Sign in or register with <strong><%= @invitation.email %></strong> to accept this invitation.
    </p>
    <%= button_to "Continue", accept_invitation_path(@invitation.token), method: :post, class: "org-button primary" %>
  <% end %>
<% end %>
